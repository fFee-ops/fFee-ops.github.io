---
title: 哲学家进餐问题
date: 2020-11-17 15:27:06
tags: 
categories: 操作系统
---

<!--more-->

### 哲学家进餐问题

- [问题描述](#_3)
- [问题分析](#_9)
- [总结](#_32)

# 问题描述

张圆桌上坐着5名哲学家,每两个哲学家之间的桌上摆一根筷子,桌子的中间是一碗米饭。哲学家们倾注毕生的精力用于思考和进餐,哲学家在思考时,并不影响他人。只有当哲学家饥饿时才试图拿起左、右两根筷子\(一根一根地拿起\)。如果筷子已在他人手上,则需等待。饥饿的哲学家**只有同时拿起两根筷子**才可以开始进餐,当进餐完毕后,放下筷子继续思考。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201117151933278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMDQwNTU5,size_16,color_FFFFFF,t_70#pic_center)

# 问题分析

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201117152003435.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMDQwNTU5,size_16,color_FFFFFF,t_70#pic_center)

**思路一（不可取）：** 每个哲学家吃饭前依次拿起左、右两支筷子，但是当五个哲学家都并发的拿起左手的筷子，那么都会去等待右手的筷子 导致死锁。

---

**思路二：** 可以对哲学家进程施加一些限制条件,比如最多允许四个哲学家同时进餐。这样可以保证至少有一个哲学家是可以拿到左右两只筷子的

**思路三：** 要求奇数号哲学家先拿左边的筷子,然后再拿右边的筷子,而偶数号哲学家刚好相反。用这种方法可以保证如果相邻的两个奇偶号哲学家都想吃饭,那么只会有其中一个可以拿起第一只筷子,另一个会直接阻塞。这就避免了占有一支后再等待另一只的情况。

**思路四：** 仅当一个哲学家左右两支筷子都可用时才允许他抓起筷子

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201117152413503.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMDQwNTU5,size_16,color_FFFFFF,t_70#pic_center)

> 更准确的说法应该是:各哲学家拿筷子这件事**必须互斥的执行**。这就保证了即使一个哲学家在拿筷子拿到一半时被阻塞,也不会有别的哲学家会继续尝试拿筷子。这样的话,当前正在吃饭的哲学家放下筷子后,被阻塞的哲学家就可以获得等待的筷子了

# 总结

哲学家进餐问题的关键在于解决进程死锁。  
这些进程之间只存在互斥关系,但是与之前接触到的互斥关系不同的是,每个进程都需要同时持有两个临界资源,因此就有“死锁”问题的隐患。

如果在考试中遇到了**一个进程需要同时持有多个临界资源**的情况,应该参考哲学家问题的思想,分析题中给出的进程之间是否会发生循环等待,是否会发生死锁。可以参考哲学家就餐问题解决死锁的三种思路。